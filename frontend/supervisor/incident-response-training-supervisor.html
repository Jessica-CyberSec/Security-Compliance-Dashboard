<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>🚨 Cyber Incident Response — Supervisors</title>
  <link rel="stylesheet" href="../style_updated_v2.css" />
  <style>
    body { margin:0; font-family: 'Segoe UI', Tahoma, sans-serif; background: linear-gradient(135deg,#f3e5f5,#e3f2fd); }
    .hero {
      background: linear-gradient(120deg,#6a1b9a,#3949ab);
      color:#fff; padding:36px 20px; text-align:center;
      box-shadow: 0 10px 24px rgba(0,0,0,.15);
    }
    .wrap { max-width: 980px; margin: 28px auto; padding: 0 16px; }
    .card {
      background:#fff; border-radius:16px; padding:24px; margin-bottom:18px;
      box-shadow: 0 6px 18px rgba(0,0,0,.08);
    }
    h2,h3 { margin: 0 0 12px; }
    h2 { font-size:28px }
    h3 { font-size:20px; color:#4a148c }
    ul,ol { margin:0 0 8px 18px }
    .meta {
      display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px;
    }
    .pill {
      background:rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.35);
      padding:6px 10px; border-radius:999px; font-size:14px;
    }
    .grid { display:grid; gap:16px; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); }
    .cta { display:flex; gap:12px; flex-wrap:wrap; align-items:center }
    .button {
      appearance:none; border:0; border-radius:12px; padding:12px 18px; cursor:pointer;
      background:#6a1b9a; color:#fff; font-weight:600; box-shadow: 0 8px 18px rgba(106,27,154,.25);
      transition: transform .05s ease, box-shadow .15s ease, background .2s ease;
    }
    .button:hover { transform: translateY(-1px); background:#4a148c; box-shadow: 0 10px 22px rgba(74,20,140,.28); }
    .button.secondary { background:#3949ab; }
    .button.ghost { background:#fff; color:#4a148c; border:1.5px solid #d1c4e9; }
    .badge { background:#ffc107; color:#111; padding:6px 10px; border-radius:999px; font-weight:700; }
    .checklist li { margin:6px 0 }
    .mark-done { background:#2e7d32; }
    .mark-done.done { background:#6c757d; cursor:default; }
    details { border:1px solid #eee; border-radius:12px; padding:10px 14px; }
    details summary { cursor:pointer; font-weight:600; color:#6a1b9a; }
    .footer-note { text-align:center; color:#666; font-size:13px; margin-top:6px }
  </style>
</head>
<body>
  <!-- HERO -->
  <header class="hero">
    <h1>🚨 Cyber Incident Response — Supervisors</h1>
    <p>Spot early, respond fast, contain impact.</p>
    <div class="meta">
      <span class="pill">⏱️ ~8–10 min</span>
      <span class="pill">🏅 +100 XP</span>
      <span class="pill">🎖️ Badge: Incident Commander</span>
    </div>
  </header>

  <main class="wrap">
    <!-- OBJECTIVE / WHY IT MATTERS -->
    <section class="grid">
      <div class="card">
        <h3>📌 Objective</h3>
        <p>Train supervisors to recognize early signs of cyber threats and take immediate action through proper reporting and containment protocols.</p>
        <h3>🧠 Why It Matters</h3>
        <p>Supervisors are often first to hear about suspicious activity. Swift action limits damage and protects business continuity.</p>
      </div>

      <div class="card">
        <h3>🧩 Best Practices</h3>
        <ul>
          <li>Coach your team to report anything suspicious immediately.</li>
          <li>Don’t ignore weak signals—treat them as incidents until ruled out.</li>
          <li>Follow up with IT for resolution and prevention steps.</li>
        </ul>
        <details>
          <summary>💡 Tips: Communicate under pressure</summary>
          <ul>
            <li>Use short, factual sentences; avoid speculation.</li>
            <li>Keep a running timeline of events and actions.</li>
            <li>Assign one comms lead per incident.</li>
          </ul>
        </details>
      </div>
    </section>

    <!-- WHAT TO WATCH / RESPONSE STEPS -->
    <section class="grid">
      <div class="card">
        <h3>🔍 What to Watch For</h3>
        <ul>
          <li>Unusual login times or repeated failed logins</li>
          <li>Unexpected system alerts or shutdowns</li>
          <li>Missing files or unexplained data changes</li>
          <li>Hardware that appears tampered with</li>
        </ul>
      </div>

      <div class="card">
        <h3>📋 Response Steps</h3>
        <ol>
          <li>Document everything (what, when, who, how).</li>
          <li>Notify IT / cybersecurity team immediately.</li>
          <li>Isolate affected systems if instructed.</li>
          <li>Support investigation; provide evidence quickly.</li>
        </ol>
      </div>
    </section>

    <!-- ROLEPLAY / CHECKLIST -->
    <section class="grid">
      <div class="card">
        <h3>🛠️ Roleplay Activity</h3>
        <blockquote>
          <p><i>Scenario:</i> A cashier reports the POS is behaving oddly.<br>
          <i>You:</i> “Let’s document this and call IT right away. I’ll help you disconnect the terminal for now.”</p>
        </blockquote>
      </div>

      <div class="card">
        <h3>✅ Quick Checklist</h3>
        <ul class="checklist">
          <li>☑️ Identify & record the symptom</li>
          <li>☑️ Preserve logs / screenshots</li>
          <li>☑️ Escalate to IT ASAP</li>
          <li>☑️ Contain and prevent spread</li>
        </ul>
        <p class="footer-note">Complete the quiz to earn <span class="badge">Incident Commander</span>.</p>
      </div>
    </section>

    <!-- CTA -->
    <section class="card">
      <div class="cta">
        <a id="startQuiz" class="button">🚀 Start Quiz</a>
        <button id="markDone" class="button mark-done">✓ Mark Module as Complete</button>
        <button class="button secondary" id="backBtn">⬅️ Back to Supervisor Dashboard</button>
        <button class="button ghost" id="refreshBtn">🔄 Refresh Role Data</button>
      </div>
      <p id="statusMsg" class="footer-note" style="margin-top:10px;"></p>
    </section>
  </main>

  <script>
    // --- UTIL: read params & safe encode ---
    const params = new URLSearchParams(window.location.search);
    const username = params.get("username") || "";
    const jobid    = params.get("jobid")    || "";
    // prefer explicit role if provided, else default Supervisor
    const role     = (params.get("role") || "Supervisor").trim();

    // --- Wire quiz link (preserve context) ---
    const quizPath = "quiz-incident-response-supervisor.html";
    const qp = new URLSearchParams({ username, jobid, role, topic: "Incident Response (Supervisor)" });
    document.getElementById("startQuiz").href = `${quizPath}?${qp.toString()}`;

    // --- Back to role dashboard (supervisor) ---
    const backBtn = document.getElementById("backBtn");
    backBtn.addEventListener("click", () => {
      const dashParams = new URLSearchParams({ username, jobid, role });
      // adjust path if your dashboard lives elsewhere
      window.location.href = `training_dashboard.html?${dashParams.toString()}`;
    });

    // --- Mark as complete (localStorage, Supervisor scope) ---
    const STORE_KEY = "completedTrainingsSupervisor";
    const MODULE_TITLE = "Cyber Incident Response — Supervisors";
    const markBtn = document.getElementById("markDone");
    const statusMsg = document.getElementById("statusMsg");

    function getList() {
      try { return JSON.parse(localStorage.getItem(STORE_KEY) || "[]"); }
      catch { return []; }
    }
    function saveList(list) { localStorage.setItem(STORE_KEY, JSON.stringify(list)); }

    // Initialize button state
    (function initCompleteState(){
      const list = getList();
      if (list.includes(MODULE_TITLE)) {
        markBtn.classList.add("done");
        markBtn.textContent = "✓ Completed";
        markBtn.disabled = true;
        statusMsg.textContent = "Already marked as complete. Great job!";
      }
    })();

    markBtn.addEventListener("click", () => {
      if (markBtn.classList.contains("done")) return;
      const list = getList();
      if (!list.includes(MODULE_TITLE)) {
        list.push(MODULE_TITLE);
        saveList(list);
      }
      markBtn.classList.add("done");
      markBtn.textContent = "✓ Completed";
      markBtn.disabled = true;
      statusMsg.textContent = "Progress saved locally. You’ll see this as completed on your Supervisor dashboard.";
    });

    // Optional helper to re-attach role context to URL (nice for bookmarks)
    document.getElementById("refreshBtn").addEventListener("click", () => {
      const next = new URL(window.location.href);
      if (username) next.searchParams.set("username", username);
      if (jobid)    next.searchParams.set("jobid", jobid);
      if (role)     next.searchParams.set("role", role);
      window.location.replace(next.toString());
    });

    // --- Gamified nudge for return visitors ---
    (function gentleNudge(){
      const visitsKey = "ir_supervisor_visits";
      const n = parseInt(localStorage.getItem(visitsKey) || "0", 10) + 1;
      localStorage.setItem(visitsKey, String(n));
      if (n === 1) statusMsg.textContent = "Welcome! Earn +100 XP by completing this module and the quiz.";
      if (n === 3 && !getList().includes(MODULE_TITLE)) {
        statusMsg.textContent = "Still in progress? Finish this module to unlock the Incident Commander badge!";
      }
    })();
  </script>
</body>
</html>
